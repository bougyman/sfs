.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SFSRWCD 8"
.TH SFSRWCD 8 "2004-10-16" "SFS 0.8pre" "SFS 0.8pre"
.SH "NAME"
sfsrwcd \- SFS read\-write protocol client daemon
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
/usr/local/lib/sfs\-0.8pre/sfsrwcd [\-u \fIunknown-user\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBsfsrwcd\fR is the daemon that implements the client side of the
\&\s-1SFS\s0 read-write file system protocol.  \fBsfsrwcd\fR acts as an \s-1NFS\s0
loopback server to the local machines's in-kernel \s-1NFS\s0 client, and as a
client to a remote \s-1SFS\s0 server speaking the read-write protocol.  Most
\&\s-1SFS\s0 servers use the read-write file system protocol, though several
research projects have implemented other protocols.
.PP
The \s-1SFS\s0 read-write protocol has \s-1RPC\s0 program number 344444 and version
number 3.  It closely resembles \s-1NFS3\s0, but additionally supports leases
on attributes:  for a short period after returning file attributes to
a client, the server commits to notifying the client when the
attributes change.  Leases enable clients to cache file attributes
more aggressively.  In addition, the \s-1SFS\s0 protocol is encrypted and
authenticated (via a message authentication code), and supports user
authentication via opaque messages, so that users' local
\&\fBsfsagent\fR processes can cryptographically authenticate them
to remote servers.
.PP
Ordinarily, \fBsfsrwcd\fR is launched by \fBsfscd\fR.  The
file \fI/usr/local/share/sfs/sfscd_config\fR
(see the man page for \fIsfscd_config\fR(5))
contains a configuration directive instructing \fBsfscd\fR to run
\&\fBsfsrwcd\fR for the read-write file system protocol (program
344444, version 3):
.PP
.Vb 1
\&    Program 344444.3 sfsrwcd
.Ve
.PP
You never need to run \fBsfsrwcd\fR directly (in fact,
\&\fBsfsrwcd\fR won't work without the \fBsfscd\fR automounter).
However, you might wish to change the options with which
\&\fBsfsrwcd\fR runs.  To do so, create an alternate
\&\fIsfscd_config\fR file in \fI/etc/sfs/\fR.  For instance, you
might use the line:
.PP
.Vb 1
\&    Program 344444.3 sfsrwcd -u unknown
.Ve
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\-u \fIunknown-user\fR" 4
.IX Item "-u unknown-user"
The \fI\-u\fR option enables user\- and group-ID mapping.
\&\fBsfsrwcd\fR will attempt to map remote user IDs to local user
IDs of authenticated users.  Moreover, when a user belongs to a file's
group on a remote machine, \fBsfsrwcd\fR will map the file's gid
to the user's local gid.
.Sp
\&\fIunknown-user\fR must be the name of a user in the local password
file.  When none of the local users have remote credentials
corresponding to a remote file's owner, \fBsfsrwcd\fR maps the
file's uid to the numeric uid of \fIunknown-user\fR.  Moreover, when a
user is not in the file's remote group, \fBsfsrwcd\fR maps the
file's uid to the numeric gid of \fIunknown-user\fR in the password
file.
.Sp
Note that even with the \fB\-u\fR option, if a local user's uid and
gid are the same as on the remote machine, no \s-1ID\s0 mapping occurs, as
the client and server are assumed to be in the same administrative
realm (though of course this might not be true).
.Sp
\&\s-1ID\s0 mapping is not completely reliable, and may result in odd behavior.
In particular for group IDs, no single mapping may work for all local
users.  Thus, one user may see a file belonging to one group, and
another user may see the same file as belonging to
\&\fIunknown-user\fR's group.  Worse yet, the kernel may cache file
attributes, so that if the two users look at the same file at roughly
the same time, one user may see the other user's mapping.
.Sp
Despite odd attributes that might result from kernel cache consistency
problems, \s-1ID\s0 mapping never changes the actual file permissions users
have on files.  Nor does it affect the results of the \fBaccess\fR
system call.  The primary reason for the \fI\-u\fR flag is that the
Macintosh finder attempts to second-guess file permissions based on
numeric user and group \s-1ID\s0, even when these values do not make sense on
the local machine.  Thus, users can be denied access to files they
have legitimate access to (and which the \fBaccess\fR system call
would show they had access to).
.Sp
Note that when \s-1ID\s0 mapping is in effect, the \fBchown\fR system call
(used by the \fBchown\fR and \fBchgrp\fR commands) is
disallowed, because its potentially confusing effects would be
concealed by the \s-1ID\s0 mapping.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIdirsearch\fR\|(1), \fInewaid\fR\|(1), \fIrex\fR\|(1), \fIsfsagent\fR\|(1), \fIsfskey\fR\|(1), \fIssu\fR\|(1), \fIsfs_config\fR\|(5), \fIsfs_hosts\fR\|(5), \fIsfs_srp_params\fR\|(5), \fIsfs_users\fR\|(5), \fIsfsauthd_config\fR\|(5), \fIsfscd_config\fR\|(5), \fIsfsrosd_config\fR\|(5), \fIsfsrwsd_config\fR\|(5), \fIsfssd_config\fR\|(5), \fIsfs_environ\fR\|(7), \fIfunmount\fR\|(8), \fInfsmounter\fR\|(8), \fIsfsauthd\fR\|(8), \fIsfscd\fR\|(8), \fIsfsrosd\fR\|(8), \fIsfsrwsd\fR\|(8), \fIsfssd\fR\|(8), \fIvidb\fR\|(8)
.PP
The full documentation for \fB\s-1SFS\s0\fR is maintained as a Texinfo
manual.  If the \fBinfo\fR and \fB\s-1SFS\s0\fR programs are properly installed
at your site, the command \fBinfo \s-1SFS\s0\fR
should give you access to the complete manual.
.PP
For updates, documentation, and software distribution, please
see the \fB\s-1SFS\s0\fR website at \fIhttp://www.fs.net/\fR.
.SH "AUTHOR"
.IX Header "AUTHOR"
sfsdev@redlab.lcs.mit.edu
